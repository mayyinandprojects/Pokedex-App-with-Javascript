let pokemonRepository=function(){let e=[],t='https://pokeapi.co/api/v2/pokemon/?limit=151';function n(){document.getElementById('loading-message').style.display='none'}function i(t){'object'==typeof t&&'name'in t&&'id'in t?e.push(t):console.log('Only objects with a name and id can be added')}function o(){return e}function a(e){return({bug:'#afd354',dark:'#545177',dragon:'#394fba',electric:'#fcfa74',fairy:'#e198f9',fighting:'#823746',fire:'#efad3b',flying:'#7da6e0',ghost:'#6e54af',grass:'#36874f',ground:'#894c34',ice:'#82d3e0',normal:'#e0e0e0',poison:'#7f429b',psychic:'#d86584',rock:'#999999',steel:'#566d89',water:'#226ccc'})[e]||'white'}function l(){return document.getElementById('loading-message').style.display='block',fetch(t).then(function(e){return e.json()}).then(function(e){let t=[];return e.results.forEach(function(e){var n;let o,a={name:e.name,detailsUrl:e.url,id:(o=(n=e.url).match(/\/pokemon\/(\d+)\//))?parseInt(o[1]):null};i(a),t.push(c(a))}),Promise.all(t)}).then(function(){e.sort((e,t)=>e.id-t.id),n();document.querySelector('.list-group').innerHTML='',pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})}).catch(function(e){console.error(e),n()})}function r(n){t=n,e=[],l()}function c(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){return e.imageUrl=t.sprites.front_default,e.types=t.types.map(e=>e.type.name),e.abilities=t.abilities.map(e=>e.ability.name),e.height=t.height,e.weight=t.weight,d(e)}).catch(function(e){console.error(e)})}function d(e){return fetch(e.detailsUrl.replace('/pokemon/','/pokemon-species/')).then(function(e){return e.json()}).then(function(t){let n=t.flavor_text_entries.find(e=>'en'===e.language.name);e.flavorText=n?n.flavor_text:'No flavor text available.'}).catch(function(e){console.error(e)})}function s(e){c(e).then(function(){var t,n,i,o;let a,l,r,c,d,s;t='No.'+e.id+' '+e.name,n='Type: '+e.types+'\nAbilities: '+e.abilities+'\nHeight: '+e.height+'\nWeight: '+e.weight+'\n',i=e.imageUrl,o='Pok\xe9dex Entry: \n'+e.flavorText,l=(a=document.querySelector('#exampleModalCenter')).querySelector('.modal-title'),c=(r=a.querySelector('.modal-body')).querySelector('p'),d=r.querySelector('img'),s=r.querySelector('#flavor-text'),l.innerText=t,c.innerText=n,d.src=i,s.innerText=o,$(a).modal('show'),console.log(e)})}return document.getElementById('gen1').addEventListener('click',function(){r('https://pokeapi.co/api/v2/pokemon/?limit=151')}),document.getElementById('gen2').addEventListener('click',function(){r('https://pokeapi.co/api/v2/pokemon?offset=151&limit=100')}),document.getElementById('gen3').addEventListener('click',function(){r('https://pokeapi.co/api/v2/pokemon?offset=251&limit=134')}),document.getElementById('gen4').addEventListener('click',function(){r('https://pokeapi.co/api/v2/pokemon?offset=386&limit=108')}),document.getElementById('gen5').addEventListener('click',function(){r('https://pokeapi.co/api/v2/pokemon?offset=494&limit=155')}),document.getElementById('gen6').addEventListener('click',function(){r('https://pokeapi.co/api/v2/pokemon?offset=649&limit=72')}),document.getElementById('gen7').addEventListener('click',function(){r('https://pokeapi.co/api/v2/pokemon?offset=721&limit=87')}),document.getElementById('gen8').addEventListener('click',function(){r('https://pokeapi.co/api/v2/pokemon?offset=809&limit=96')}),document.getElementById('gen9').addEventListener('click',function(){r('https://pokeapi.co/api/v2/pokemon?offset=905&limit=120')}),{add:i,getAll:o,showDetails:s,addListItem:function e(t){let n=document.querySelector('.list-group'),i=document.createElement('li'),o=document.createElement('div');if(o.classList.add('card'),t.types.length>1){let l=a(t.types[0]),r=a(t.types[1]);o.style.background=`linear-gradient(to right, ${l} 50%, ${r} 50%)`}else o.style.backgroundColor=a(t.types[0]);let c=document.createElement('img');c.classList.add('card-img-top','pokemon-image'),c.src=t.imageUrl,c.setAttribute('alt',t.name+' sprite');let d=document.createElement('div');d.classList.add('card-body');let p=document.createElement('h5');p.classList.add('card-title'),p.innerText='#'+t.id+'\n '+t.name,d.appendChild(p),o.appendChild(c),o.appendChild(d),i.appendChild(o),n.appendChild(i),function e(t,n){t.addEventListener('click',function(){s(n)})}(o,t)},loadList:l,loadFlavorText:d}}();pokemonRepository.loadList();